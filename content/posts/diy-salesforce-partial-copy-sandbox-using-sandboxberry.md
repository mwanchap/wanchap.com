+++
title = "DIY Salesforce partial copy sandbox using SandboxBerry"
date = 2019-04-17T17:48:00Z
updated = 2019-05-21T18:07:31Z
blogimport = true 
[author]
	name = "Matt Wanchap"
	uri = "https://www.blogger.com/profile/16465307324394182190"
+++

Salesforce partial copy sandboxes are expensive, but it's possible to approximate one if you're willing to spend a little time moving the data around  yourself with a fantastic little tool called SandboxBerry, which you can get from <a href="https://github.com/codeulike/SandboxBerry" target="_blank">here</a>. Big thanks to Ian Finch for all his work on it!<br /><br />Below are the steps I had to go through to get all my data imported. Please let me know if you have any suggestions that could make this easier or more effective!  <br /><br /><ol><li>Make a new development sandbox and log into it</li><li>Delete all outbound messages and workflows that relate to integrations with external systems</li><li>Save a copy of /ExampleInstructionFiles/ExampleInstructionFile.xml, henceforth called InstructionFile.xml</li><li>Decide which object types you want to migrate and add them as SbbObjects in InstructionFile.xml</li><li>Deactivate validation rules, mandatory fields, lookup filters and autonumber fields for those objects (TODO: write a script to do this by exporting metadata, disabling them all programmatically, then re-importing the updated metadata).&nbsp; For future reference we had to:</li><ul><li>Deactivate validation rules on the following: Account, Contact, Charge, Product</li><li>Remove lookup filters on: Account.Business_Consultant, Charge.Base_Product, Charge.Contact, Charge.Account</li><li>Make the following fields no longer required: Charge.Account, Charge.Contact</li><li>Remove the restriction from picklist values for Charge.Billing_year</li><li>Deactivate the following in process builder: "Set fields on contact and parent account after lead conversion" and "Set dates for once-off charges"</li><li>Deactivate the following workflow rules:&nbsp;Set charge account LOB field</li><li>Change autonumber fields to text fields: Charge.Name</li></ul><li>If you're using person accounts like we are (ugh), you'll need to exclude the __pc fields as well as "MiddleName" and "Suffix". In InstructionFile.xml, add an SbbFieldOptions section with an SbbFieldOption for each field as instructed in the <a href="https://github.com/codeulike/SandboxBerry/wiki#instructions-files">wiki</a></li><li>Run Sandboxberry, put in your details and click Start!</li></ol><div><br />In general, I'd suggest doing a test run first on just a few records for each object, filtering by IDs like:<br />Account.where =&nbsp; Id\= '001900000123456'</div><div>Object_Name__c.where = Account\= '001900000123456'</div><div>Then run the import and ensure everything shows up as expected for that account.</div>
